"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.copy = void 0;
const fs_1 = require("fs");
const path_1 = require("path");
const ensureDirExistSync = (dirPath) => {
    try {
        (0, fs_1.readdirSync)(dirPath);
    }
    catch (err) {
        (0, fs_1.mkdirSync)(dirPath);
    }
};
const copyFile = (srcFile, targetFile) => {
    const targetDir = (0, path_1.dirname)(targetFile);
    ensureDirExistSync(targetDir);
    const rs = (0, fs_1.createReadStream)(srcFile); // create read stream
    const ws = (0, fs_1.createWriteStream)(targetFile); // create write stream
    rs.pipe(ws);
};
const copyDir = (srcDir, targetDir) => {
    ensureDirExistSync(targetDir);
    const files = (0, fs_1.readdirSync)(srcDir, { withFileTypes: true });
    files.forEach((file) => {
        if (file.isFile())
            copyFile(`${srcDir}/${file.name}`, `${targetDir}/${file.name}`);
        else if (file.isDirectory())
            copyDir(`${srcDir}/${file.name}`, `${targetDir}/${file.name}`);
    });
};
const copy = (src, target) => {
    if ((0, fs_1.statSync)(src).isDirectory())
        copyDir(src, target);
    else if ((0, fs_1.statSync)(src).isFile())
        copyFile(src, target);
};
exports.copy = copy;
//# sourceMappingURL=copy.js.map