{"remainingRequest":"/Users/liruichen/test/press/node_modules/babel-loader/lib/index.js??ref--3-1!/Users/liruichen/test/press/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liruichen/test/press/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liruichen/test/press/node_modules/vuepress-theme-ting/components/ting-search.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liruichen/test/press/node_modules/vuepress-theme-ting/components/ting-search.vue","mtime":1656938188487},{"path":"/Users/liruichen/test/press/node_modules/cache-loader/dist/cjs.js","mtime":1656678766982},{"path":"/Users/liruichen/test/press/node_modules/babel-loader/lib/index.js","mtime":1650710743750},{"path":"/Users/liruichen/test/press/node_modules/cache-loader/dist/cjs.js","mtime":1656678766982},{"path":"/Users/liruichen/test/press/node_modules/vue-loader/lib/index.js","mtime":1656678767627}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWFyY2hLZXk6ICIiLAogICAgICBhbGxIZWFkZXI6IFtdLAogICAgICBoZWFkZXJMaXN0OiBbXQogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgc2VhcmNoVGl0bGVzOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBsaXN0ID0gdGhpcy5oZWFkZXJMaXN0LmZpbHRlcigoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICBpZiAoaXRlbS5oZWFkZXIudG9Mb3dlckNhc2UoKS5pbmRleE9mKHRoaXMuc2VhcmNoS2V5LnRvTG93ZXJDYXNlKCkpICE9IC0xIHx8IGl0ZW0udGl0bGUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHRoaXMuc2VhcmNoS2V5LnRvTG93ZXJDYXNlKCkpICE9IC0xKSB7CiAgICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB2YXIgbmV3TGlzdCA9IFtdOwogICAgICB2YXIgbGVuID0gbGlzdC5sZW5ndGggPiA2ID8gNiA6IGxpc3QubGVuZ3RoOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgIG5ld0xpc3QucHVzaChsaXN0W2ldKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5ld0xpc3Q7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDot7PovazpobXpnaIKICAgIHNlYXJjaExpbmsoaXRlbSkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogaXRlbS5yb2FkCiAgICAgIH0pLmNhdGNoKGVyciA9PiB7fSk7CiAgICAgIHRoaXMuc2VhcmNoS2V5ID0gbnVsbDsKICAgIH0sCgogICAgLy8g5aSE55CGaGVhZGVy5Yiw5LiA5Liq5YiX6KGo6YeMCiAgICByZXNvbHZlSGVhZGVyKGFycikgewogICAgICBhcnIuZm9yRWFjaChlbGVtZW50ID0+IHsKICAgICAgICBpZiAoZWxlbWVudC5oZWFkZXJzKSB7CiAgICAgICAgICB0aGlzLmhlYWRlckxpc3QucHVzaCh7CiAgICAgICAgICAgIHJvYWQ6IGVsZW1lbnQucGF0aCwKICAgICAgICAgICAgaGVhZGVyOiAiIiwKICAgICAgICAgICAgaHJlZjogZWxlbWVudC5yZWd1bGFyUGF0aCwKICAgICAgICAgICAgdGl0bGU6IGVsZW1lbnQudGl0bGUgPT0gdW5kZWZpbmVkID8gIiIgOiBlbGVtZW50LnRpdGxlCiAgICAgICAgICB9KTsKICAgICAgICAgIHZhciBoZWFkZXJzID0gZWxlbWVudC5oZWFkZXJzOyAvL+mBjeWOhuaWh+eroOmHjOmdoueahGhlYWRlcgoKICAgICAgICAgIGhlYWRlcnMuZm9yRWFjaChoZWFkID0+IHsKICAgICAgICAgICAgdmFyIGhyZWYgPSBoZWFkLnNsdWc7CiAgICAgICAgICAgIHZhciByb2FkID0gZWxlbWVudC5wYXRoICsgIiMiICsgaHJlZjsKICAgICAgICAgICAgdGhpcy5oZWFkZXJMaXN0LnB1c2goewogICAgICAgICAgICAgIHJvYWQ6IHJvYWQsCiAgICAgICAgICAgICAgaGVhZGVyOiBoZWFkLnRpdGxlLAogICAgICAgICAgICAgIGhyZWY6IGhyZWYsCiAgICAgICAgICAgICAgdGl0bGU6IGVsZW1lbnQudGl0bGUgPT0gdW5kZWZpbmVkID8gIiIgOiBlbGVtZW50LnRpdGxlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMucmVzb2x2ZUhlYWRlcih0aGlzLiRzaXRlLnBhZ2VzKTsKICB9Cgp9Ow=="},{"version":3,"mappings":"AAyBA;EACAA;IACA;MACAC,aADA;MAEAC,aAFA;MAGAC;IAHA;EAKA,CAPA;;EAQAC;IACAC;MACA;QACA,IACAC,mEACA,EADA,IAEAA,oEAHA,EAIA;UACA;QACA;MACA,CARA;MASA;MACA;;MACA;QACAC;MACA;;MACA;IACA;EAjBA,CARA;EA2BAC;IACA;IACAC;MACA,aACAC,IADA,CACA;QACAC;MADA,CADA,EAIAC,KAJA,CAIAC,SAJA;MAKA;IACA,CATA;;IAUA;IACAC;MACAC;QACA;UACA;YACAC,kBADA;YAEAC,UAFA;YAGAC,yBAHA;YAIAC;UAJA;UAMA,8BAPA,CAQA;;UACAC;YACA;YACA;YACA;cACAJ,UADA;cAEAC,kBAFA;cAGAC,UAHA;cAIAC;YAJA;UAMA,CATA;QAUA;MACA,CArBA;IAsBA;;EAlCA,CA3BA;;EA+DAE;IACA;EACA;;AAjEA","names":["data","searchKey","allHeader","headerList","computed","searchTitles","item","newList","methods","searchLink","push","path","catch","err","resolveHeader","arr","road","header","href","title","headers","mounted"],"sourceRoot":"node_modules/vuepress-theme-ting/components","sources":["ting-search.vue"],"sourcesContent":["<template>\n  <div class=\"search-box\">\n    <input\n      autofocus=\"autofocus\"\n      v-model=\"searchKey\"\n      placeholder=\"找找关键词哦～\"\n    />\n    <div\n      :class=\"searchKey && searchTitles.length ? 'show' : 'hide'\"\n      class=\"result-list\"\n    >\n      <div\n        class=\"result-item\"\n        v-for=\"(item, index) in searchTitles\"\n        @click=\"searchLink(item)\"\n        :key=\"index\"\n      >\n        <span class=\"result-item-tit\">{{ item.title }} </span>\n        <span class=\"result-item-header\">{{ item.header }}</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      searchKey: \"\",\n      allHeader: [],\n      headerList: [],\n    };\n  },\n  computed: {\n    searchTitles: function () {\n      var list = this.headerList.filter((item, index) => {\n        if (\n          item.header.toLowerCase().indexOf(this.searchKey.toLowerCase()) !=\n            -1 ||\n          item.title.toLowerCase().indexOf(this.searchKey.toLowerCase()) != -1\n        ) {\n          return item;\n        }\n      });\n      var newList = [];\n      var len = list.length > 6 ? 6 : list.length;\n      for (var i = 0; i < len; i++) {\n        newList.push(list[i]);\n      }\n      return newList;\n    },\n  },\n  methods: {\n    // 跳转页面\n    searchLink(item) {\n      this.$router\n        .push({\n          path: item.road,\n        })\n        .catch((err) => {});\n      this.searchKey = null;\n    },\n    // 处理header到一个列表里\n    resolveHeader(arr) {\n      arr.forEach((element) => {\n        if (element.headers) {\n          this.headerList.push({\n            road: element.path,\n            header: \"\",\n            href: element.regularPath,\n            title: element.title == undefined ? \"\" : element.title,\n          });\n          var headers = element.headers;\n          //遍历文章里面的header\n          headers.forEach((head) => {\n            var href = head.slug;\n            var road = element.path + \"#\" + href;\n            this.headerList.push({\n              road: road,\n              header: head.title,\n              href: href,\n              title: element.title == undefined ? \"\" : element.title,\n            });\n          });\n        }\n      });\n    },\n  },\n  mounted() {\n    this.resolveHeader(this.$site.pages);\n  },\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n.search-box {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  position: relative;\n  font-size: 1em;\n  margin: 1em;\n\n  input {\n    border-radius: 1em;\n    padding: 0.5em 1em;\n    display: block;\n    outline: none;\n    border: 2px solid #fda6bc;\n    box-shadow: 0 2px 7px rgba(0, 0, 0, 0.15);\n    margin: 1em 0;\n    box-sizing: border-box;\n    position: relative;\n  }\n\n  .result-list {\n    position: absolute;\n    left: 0;\n    transition: 1s all;\n    right: 0;\n    margin: 1em;\n    margin-top: 3.5em;\n    background: #ffffff;\n    border: 2px dashed #fda6bc;\n    z-index: 9;\n    box-shadow: 0 2px 7px rgba(0, 0, 0, 0.15);\n\n    &:after {\n      content: ' ';\n      position: absolute;\n      top: -1em;\n      left: 0;\n      right: 0;\n      width: 0;\n      height: 0;\n      margin: auto;\n      border: solid 0.5em #fda6bc;\n      border-top: transparent 0.5em solid;\n      border-right: transparent 0.5em solid;\n      border-left: transparent 0.5em solid;\n    }\n\n    .result-item {\n      border-bottom: solid 1px #f1f2f4;\n      padding: 10px;\n\n      &-tit {\n        font-weight: bold;\n        max-width: 6em;\n      }\n\n      &-header {\n        font-size: 0.8em;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n    }\n  }\n}\n</style>"]}]}